<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NJ HITZ Tryout Registration</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />
<style>
  :root { --hitz-purple:#4c2a85; --hitz-gold:#b38b35; --hitz-black:#0e0e0f; --hitz-white:#fff; }

  /* Mobile-first base */
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--hitz-white);background:var(--hitz-black);line-height:1.45}

  /* Header (mobile-friendly) */
  header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,var(--hitz-purple),#24154f);padding:10px 12px;border-bottom:2px solid var(--hitz-gold)}
  .header-row{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px}
  .header-home{display:inline-flex;align-items:center;gap:6px;background:var(--hitz-gold);color:var(--hitz-black);font-weight:800;padding:10px 14px;border-radius:999px;text-transform:uppercase;font-size:.9rem;text-decoration:none;border:2px solid var(--hitz-gold);transition:.2s}
  .header-home:hover{background:var(--hitz-white);color:var(--hitz-black);transform:translateY(-1px)}
  .header-logo{justify-self:center;line-height:0}
  .header-logo img{height:56px;width:auto;filter:drop-shadow(0 2px 10px rgba(0,0,0,.6))}
  .header-title{margin-top:8px;text-align:center;color:var(--hitz-gold);text-transform:uppercase;font-weight:900;letter-spacing:.06em;font-size:1.05rem}
  @media (min-width:640px){ .header-logo img{height:80px}.header-title{font-size:1.4rem} }

  /* Form wrapper */
  .form-wrapper{background:#121214;width:min(680px,94vw);margin:22px auto 40px;padding:22px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.08);box-shadow:0 4px 20px rgba(0,0,0,.35)}
  @media (min-width:640px){ .form-wrapper{padding:36px 28px;margin-top:32px} }
  h2{ text-align:center;color:var(--hitz-gold);text-transform:uppercase;font-size:1.2rem;margin:0 0 18px;letter-spacing:.08em }
  @media (min-width:640px){ h2{font-size:1.35rem} }

  /* Fields */
  .form-grid{display:grid;grid-template-columns:1fr;gap:14px}
  @media (min-width:640px){ .two-col{grid-template-columns:1fr 1fr} }
  .form-field{display:block}
  label{display:block;margin:0 0 6px;font-weight:700;color:var(--hitz-gold);font-size:.95rem}
  input,textarea{width:100%;padding:12px;border-radius:8px;border:1px solid #333;background:#1c1c1e;color:var(--hitz-white);font-size:1rem;outline:none;transition:border-color .2s,box-shadow .2s}
  input:focus,textarea:focus{border-color:var(--hitz-gold);box-shadow:0 0 0 2px rgba(179,139,53,.15)}
  input::placeholder,textarea::placeholder{color:#9c9ca5}
  .field-error{display:block;color:#ff9c9c;font-size:.9rem;margin-top:6px;min-height:1.1em}
  input[aria-invalid="true"],textarea[aria-invalid="true"]{border-color:#ff6b6b!important;box-shadow:0 0 0 2px rgba(255,107,107,.15)}

  /* Buttons */
  .button-row{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:8px}
  button,.btn-link{background:var(--hitz-purple);color:var(--hitz-white);font-weight:800;text-transform:uppercase;border:2px solid var(--hitz-gold);padding:12px 22px;border-radius:999px;cursor:pointer;font-size:1rem;text-decoration:none;transition:all .2s}
  button:hover,.btn-link:hover{background:var(--hitz-gold);color:var(--hitz-black);transform:translateY(-1px)}
  .btn-cancel{background:transparent;color:var(--hitz-gold);border-color:var(--hitz-gold)}
  .btn-cancel:hover{background:#2c2c2c;color:var(--hitz-white)}
  .success-message{display:none;text-align:center;color:var(--hitz-gold);font-weight:700;margin-top:10px}

  /* Footer/socials */
  .stripe{background:linear-gradient(90deg,var(--hitz-purple),var(--hitz-gold));height:4px}
  .footer{padding:18px 0 36px;text-align:center;color:#cfcfdb;font-size:.9rem}
  .gold{color:var(--hitz-gold)}
  .footer .social{margin-top:14px;display:flex;justify-content:center;gap:14px}
  .footer .social a{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;border-radius:999px;background:var(--hitz-purple);border:2px solid var(--hitz-gold);color:var(--hitz-gold);transition:all .25s;text-decoration:none;font-size:1.2rem}
  .footer .social a:hover{background:var(--hitz-gold);color:var(--hitz-black);transform:translateY(-2px)}
  .footer .social svg{width:18px;height:18px;fill:currentColor}
</style>
</head>
<body>
  <header>
    <div class="header-row">
      <a href="/" class="header-home" aria-label="Home">Home</a>
      <div class="header-logo">
        <img src="https://njhitz.github.io/images/hitzpurple.png" alt="NJ HITZ Logo" />
      </div>
      <span style="width:1px;"></span>
    </div>
    <h1 class="header-title">Team Tryout Registration</h1>
  </header>

  <div class="form-wrapper" role="region" aria-labelledby="formTitle">
    <h2 id="formTitle">Player Information</h2>

    <!-- IMPORTANT:
         Replace GOOGLE_FORM_ACTION and each entry.* mapping in the JS below. -->
    <form id="tryoutForm" novalidate>
      <div class="form-grid">
        <div class="form-field">
          <label for="playerName">Player's Name</label>
          <input type="text" id="playerName" placeholder="Jane Doe" autocomplete="name" required />
          <span class="field-error" id="errName"></span>
        </div>

        <div class="form-field">
          <label for="playerAddress">Player's Address</label>
          <textarea id="playerAddress" rows="2" placeholder="Street, City, State" autocomplete="street-address" required></textarea>
          <span class="field-error" id="errAddress"></span>
        </div>
      </div>

      <div class="form-grid two-col">
        <div class="form-field">
          <label for="guardianPhone">Parent or Guardian's Phone</label>
          <input type="tel" id="guardianPhone" placeholder="(555) 123-4567" inputmode="tel"
                 pattern="^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\s\.-]?)?\d{3}[\s\.-]?\d{4}$"
                 title="Enter a valid 10-digit phone number" autocomplete="tel" required />
          <span class="field-error" id="errPhone"></span>
        </div>

        <div class="form-field">
          <label for="guardianEmail">Parent or Guardian's Email</label>
          <input type="email" id="guardianEmail" placeholder="name@example.com" inputmode="email" autocomplete="email" required />
          <span class="field-error" id="errEmail"></span>
        </div>
      </div>

      <div class="form-grid two-col">
        <div class="form-field">
          <label for="birthdate">Player's Birthdate</label>
          <input type="date" id="birthdate" required />
          <span class="field-error" id="errBirthdate"></span>
        </div>

        <div class="form-field">
          <label for="ageGradYear">Player's Age & Grad Year</label>
          <input type="text" id="ageGradYear" placeholder="14U • Class of 2029" required />
          <span class="field-error" id="errAgeGrad"></span>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-field">
          <label for="highSchool">High School (optional)</label>
          <input type="text" id="highSchool" placeholder="School Name" autocomplete="organization" />
          <span class="field-error" id="errHS"></span>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-field">
          <label>Positions You Play</label>
          <input type="text" id="pos1" name="Position 1" placeholder="Position 1 (e.g., P, SS, C)" />
          <span class="field-error" id="errPos1"></span>
        </div>
        <div class="form-field">
          <label class="sr-only" style="position: absolute; left: -9999px">Additional Positions</label>
          <input type="text" id="pos2" name="Position 2" placeholder="Position 2 (optional)" />
          <span class="field-error" id="errPos2"></span>
        </div>
        <div class="form-field">
          <input type="text" id="pos3" name="Position 3" placeholder="Position 3 (optional)" />
          <span class="field-error" id="errPos3"></span>
        </div>
      </div>

      <div class="button-row">
        <button id="submitBtn" type="submit">Submit Registration</button>
        <button type="button" class="btn-cancel" onclick="document.getElementById('tryoutForm').reset()">Reset Form</button>
      </div>
      <p class="success-message" id="successMsg">Thank you! Your tryout registration has been submitted. We'll be in touch!</p>
    </form>
  </div>

  <div class="stripe" aria-hidden="true"></div>
  <div class="footer container">
    <div>
      <img src="https://njhitz.github.io/images/hitzhoodie.png" alt="NJ HITZ mark"
           style="height:26px;vertical-align:middle;margin-right:8px;filter:drop-shadow(0 1px 4px rgba(0,0,0,.5))">
      <span>© <span class="gold">NJ HITZ</span> Softball • New Jersey</span>
    </div>
    <div class="social">
      <a href="https://www.facebook.com/nj.hitz" target="_blank" aria-label="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.1 0-121.07 44.38-121.07 124.72v70.62H22.89V288h81.4v224h100.17V288z"/></svg>
      </a>
      <a href="https://www.instagram.com/njhitz_softball/" target="_blank" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224,202.66A53.34,53.34,0,1,0,277.34,256,53.38,53.38,0,0,0,224,202.66ZM398.8,80A47.7,47.7,0,0,0,351.1,32H96.9A47.7,47.7,0,0,0,49.2,80V432a47.7,47.7,0,0,0,47.7,48H351.1a47.7,47.7,0,0,0,47.7-48ZM224,338a82,82,0,1,1,82-82A82.09,82.09,0,0,1,224,338Zm104-146a19,19,0,1,1,19-19A19,19,0,0,1,328,192Z"/></svg>
      </a>
    </div>
  </div>

<script>
(function(){
  // --- 1) SET THESE TO YOUR GOOGLE FORM DETAILS ---
  // Open your live Google Form, copy its "action" URL (ends with /formResponse)
  const GOOGLE_FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSdFQbPCuqXE3CL1Bqqg3CvsjZh8_FfPWgzC1pQlrxwvE5nztw/formResponse";

  // Map your local fields -> Google Form entry IDs (find them in the form HTML)
  const MAP = {
    name:       "entry.1398959969", // <-- fixed (had been 139895996)
    address:    "entry.1424698732",
    phone:      "entry.1957154046",
    email:      "entry.1992213922",
    agegrad:    "entry.2106801821",
    highschool: "entry.1125414312",
    pos1:       "entry.1376913827",
    pos2:       "entry.754009436",
    pos3:       "entry.287020567",
    birthdateBase: "entry.1243531652" // post _year/_month/_day
  };
  // ------------------------------------------------

  const form = document.getElementById('tryoutForm');
  const success = document.getElementById('successMsg');
  const btn = document.getElementById('submitBtn');

  // Fields
  const fName = document.getElementById('playerName');
  const fAddress = document.getElementById('playerAddress');
  const fPhone = document.getElementById('guardianPhone');
  const fEmail = document.getElementById('guardianEmail');
  const fBirth = document.getElementById('birthdate');
  const fAgeGrad = document.getElementById('ageGradYear');
  const fHS = document.getElementById('highSchool');
  const fPos1 = document.getElementById('pos1');
  const fPos2 = document.getElementById('pos2');
  const fPos3 = document.getElementById('pos3');

  // Errors
  const eName = document.getElementById('errName');
  const eAddress = document.getElementById('errAddress');
  const ePhone = document.getElementById('errPhone');
  const eEmail = document.getElementById('errEmail');
  const eBirth = document.getElementById('errBirthdate');
  const eAgeGrad = document.getElementById('errAgeGrad');

  const phoneRegex = /^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\s\.-]?)?\d{3}[\s\.-]?\d{4}$/;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  function setError(input, errEl, msg){ input.setAttribute('aria-invalid','true'); errEl.textContent = msg; }
  function clearError(input, errEl){ input.removeAttribute('aria-invalid'); errEl.textContent = ''; }

  function validateField(input){
    const id = input.id;
    const val = (input.value || '').trim();

    if(id === 'playerName'){ if(!val){ setError(input,eName,'Player name is required.'); return false;} clearError(input,eName); return true; }
    if(id === 'playerAddress'){ if(!val){ setError(input,eAddress,'Address is required.'); return false;} clearError(input,eAddress); return true; }
    if(id === 'guardianPhone'){
      if(!val){ setError(input,ePhone,'Phone is required.'); return false; }
      if(!phoneRegex.test(val)){ setError(input,ePhone,'Enter a valid phone number.'); return false; }
      clearError(input,ePhone); return true;
    }
    if(id === 'guardianEmail'){
      if(!val){ setError(input,eEmail,'Email is required.'); return false; }
      if(!emailRegex.test(val)){ setError(input,eEmail,'Enter a valid email address.'); return false; }
      clearError(input,eEmail); return true;
    }
    if(id === 'birthdate'){ if(!val){ setError(input,eBirth,'Birthdate is required.'); return false;} clearError(input,eBirth); return true; }
    if(id === 'ageGradYear'){ if(!val){ setError(input,eAgeGrad,'Age & Grad Year is required.'); return false;} clearError(input,eAgeGrad); return true; }
    return true;
  }

  function validateAll(){
    const results = [
      validateField(fName),
      validateField(fAddress),
      validateField(fPhone),
      validateField(fEmail),
      validateField(fBirth),
      validateField(fAgeGrad)
    ];
    const firstInvalid = [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].find(el => el.getAttribute('aria-invalid') === 'true');
    if(firstInvalid) firstInvalid.focus();
    return results.every(Boolean);
  }

  [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].forEach(el=>{
    el.addEventListener('input', ()=>validateField(el));
    el.addEventListener('blur', ()=>validateField(el));
  });

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    success.style.display = 'none';
    if(!validateAll()) return;

    // Build payload for Google Forms
    const payload = new FormData();
    payload.append(MAP.name,      fName.value.trim());
    payload.append(MAP.address,   fAddress.value.trim());
    payload.append(MAP.phone,     fPhone.value.trim());
    payload.append(MAP.email,     fEmail.value.trim());
    payload.append(MAP.agegrad,   fAgeGrad.value.trim());

    if(MAP.highschool) payload.append(MAP.highschool, (fHS.value || '').trim());
    if(MAP.pos1) payload.append(MAP.pos1, (fPos1.value || '').trim());
    if(MAP.pos2) payload.append(MAP.pos2, (fPos2.value || '').trim());
    if(MAP.pos3) payload.append(MAP.pos3, (fPos3.value || '').trim());

    // --- Birthdate: split YYYY-MM-DD into Google Forms' 3 fields ---
    const iso = (fBirth.value || '').trim();       // e.g., "2025-10-23"
    const [yyyy, mm, dd] = iso ? iso.split('-') : [null, null, null];
    if (yyyy && mm && dd) {
      // Google Forms expects the same base id with _year, _month, _day suffixes
      payload.append(`${MAP.birthdateBase}_year`,  String(parseInt(yyyy, 10)));
      payload.append(`${MAP.birthdateBase}_month`, String(parseInt(mm,   10))); // 1-12
      payload.append(`${MAP.birthdateBase}_day`,   String(parseInt(dd,   10))); // 1-31
    } else {
      // (Optional) You can block submission here if birthdate is required
      // but your validation already enforces it before submit.
    }

    // Optional Google Forms extras (not always required, safe to include)
    payload.append('fvv','1'); payload.append('pageHistory','0');

    btn.disabled = true; btn.textContent = 'Submitting…';
    try{
      // Note: Google Forms doesn't send CORS responses → use no-cors
      await fetch(GOOGLE_FORM_ACTION, { method:'POST', mode:'no-cors', body: payload });
      form.reset();
      [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].forEach(el=>el.removeAttribute('aria-invalid'));
      success.style.display = 'block';
    }catch(err){
      alert('There was an error submitting the form. Please try again.');
    }finally{
      btn.disabled = false; btn.textContent = 'Submit Registration';
    }
  });
})();
</script>
</body>
</html>