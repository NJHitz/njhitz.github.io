<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NJ Hitz Softball Tryouts | Join Our Team</title>
<meta name="description" content="Register for NJ Hitz Softball tryouts! Showcase your skills, meet our coaches, and become part of New Jersey’s most competitive fastpitch program.">
<meta name="image" content="https://njhitz.org/images/hitz-meta-og.png">

<meta property="og:type" content="website">
<meta property="og:url" content="https://njhitz.org/tryouts">
<meta property="og:title" content="NJ Hitz Tryouts">
<meta property="og:description" content="Show your skills and join NJ Hitz Softball. Register now for our official tryouts.">
<meta property="og:image" content="https://njhitz.org/images/hitz-meta-og.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="NJ Hitz Tryouts">
<meta name="twitter:description" content="Join the NJ Hitz program — tryouts now open for upcoming seasons.">
<meta name="twitter:image" content="https://njhitz.org/images/hitz-meta-twitter.png">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "NJ Hitz Softball Tryouts",
  "url": "https://njhitz.org/tryouts",
  "eventType": "SportsTryout",
  "description": "Official NJ Hitz Softball tryouts for upcoming competitive teams.",
  "image": "https://njhitz.org/images/hitz-meta-og.png",
  "organizer": {
    "@type": "SportsOrganization",
    "name": "NJ Hitz Softball",
    "url": "https://njhitz.org/"
  }
}
</script>

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />
<script src="scripts/preload.js"></script>

<link href="css/main.css" rel="stylesheet">
<style>
  /* Form wrapper */
  .form-wrapper{background:#121214;width:min(680px,94vw);margin:22px auto 40px;padding:22px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.08);box-shadow:0 4px 20px rgba(0,0,0,.35)}
  @media (min-width:640px){ .form-wrapper{padding:36px 28px;margin-top:32px} }
  h2{ text-align:center;color:var(--hitz-gold);text-transform:uppercase;font-size:1.2rem;margin:0 0 18px;letter-spacing:.08em }
  @media (min-width:640px){ h2{font-size:1.35rem} }

  /* Fields */
  .form-grid{display:grid;grid-template-columns:1fr;gap:14px}
  @media (min-width:640px){ .two-col{grid-template-columns:1fr 1fr} }
  .form-field{display:block}
  label{display:block;margin:0 0 6px;font-weight:700;color:var(--hitz-gold);font-size:.95rem}
  input,textarea{width:100%;padding:12px;border-radius:8px;border:1px solid #333;background:#1c1c1e;color:var(--hitz-white);font-size:1rem;outline:none;transition:border-color .2s,box-shadow .2s}
  input:focus,textarea:focus{border-color:var(--hitz-gold);box-shadow:0 0 0 2px rgba(179,139,53,.15)}
  input::placeholder,textarea::placeholder{color:#9c9ca5}
  .field-error{display:block;color:#ff9c9c;font-size:.9rem;margin-top:6px;min-height:1.1em}
  input[aria-invalid="true"],textarea[aria-invalid="true"]{border-color:#ff6b6b!important;box-shadow:0 0 0 2px rgba(255,107,107,.15)}
</style>
</head>
<body>
  <header class="site-header" id="header"></header>

  <div class="page-container">
    <section class="hero">
      <div class="hero-inner">
        <div class="hero-eyebrow">NJ HITZ SOFTBALL</div>
        <h1>Team Tryout Registration</h1>
        <p>Interested in becoming a NJ Hitz Player? Fill out the form below and we'll be in touch!</p>
      </div>
    </section>

    <div class="form-wrapper" role="region" aria-labelledby="formTitle">
      <h2 id="formTitle">Player Information</h2>

      <!-- IMPORTANT:
          Replace GOOGLE_FORM_ACTION and each entry.* mapping in the JS below. -->
      <form id="tryoutForm" novalidate>
        <div class="form-grid">
          <div class="form-field">
            <label for="playerName">Player's Name</label>
            <input type="text" id="playerName" placeholder="Jane Doe" autocomplete="name" required />
            <span class="field-error" id="errName"></span>
          </div>

          <div class="form-field">
            <label for="playerAddress">Player's Address</label>
            <textarea id="playerAddress" rows="2" placeholder="Street, City, State" autocomplete="street-address" required></textarea>
            <span class="field-error" id="errAddress"></span>
          </div>
        </div>

        <div class="form-grid two-col">
          <div class="form-field">
            <label for="guardianPhone">Parent or Guardian's Phone</label>
            <input type="tel" id="guardianPhone" placeholder="(555) 123-4567" inputmode="tel"
                  pattern="^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\s\.-]?)?\d{3}[\s\.-]?\d{4}$"
                  title="Enter a valid 10-digit phone number" autocomplete="tel" required />
            <span class="field-error" id="errPhone"></span>
          </div>

          <div class="form-field">
            <label for="guardianEmail">Parent or Guardian's Email</label>
            <input type="email" id="guardianEmail" placeholder="name@example.com" inputmode="email" autocomplete="email" required />
            <span class="field-error" id="errEmail"></span>
          </div>
        </div>

        <div class="form-grid two-col">
          <div class="form-field">
            <label for="birthdate">Player's Birthdate</label>
            <input type="date" id="birthdate" required />
            <span class="field-error" id="errBirthdate"></span>
          </div>

          <div class="form-field">
            <label for="ageGradYear">Player's Grad Year</label>
            <input type="text" id="ageGradYear" placeholder="Class of 2029" required />
            <span class="field-error" id="errAgeGrad"></span>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label for="highSchool">High School (optional)</label>
            <input type="text" id="highSchool" placeholder="School Name" autocomplete="organization" />
            <span class="field-error" id="errHS"></span>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label>Positions You Play</label>
            <input type="text" id="pos1" name="Position 1" placeholder="Position 1 (e.g., P, SS, C)" />
            <span class="field-error" id="errPos1"></span>
          </div>
          <div class="form-field">
            <label class="sr-only" style="position: absolute; left: -9999px">Additional Positions</label>
            <input type="text" id="pos2" name="Position 2" placeholder="Position 2 (optional)" />
            <span class="field-error" id="errPos2"></span>
          </div>
          <div class="form-field">
            <input type="text" id="pos3" name="Position 3" placeholder="Position 3 (optional)" />
            <span class="field-error" id="errPos3"></span>
          </div>
        </div>

        <div class="button-row">
          <button id="submitBtn" type="submit">Submit Registration</button>
          <button type="button" class="btn-cancel" onclick="document.getElementById('tryoutForm').reset()">Reset Form</button>
        </div>
        <p class="success-message" id="successMsg">Thank you! Your tryout registration has been submitted. We'll be in touch!</p>
      </form>
    </div>

    <div id="footer"></div>
  </div>
  <!--
  <div class="stripe" aria-hidden="true"></div>
  <div class="footer container">
    <div>
      <img src="https://njhitz.github.io/images/hitzhoodie.png" alt="NJ HITZ mark"
           style="height:26px;vertical-align:middle;margin-right:8px;filter:drop-shadow(0 1px 4px rgba(0,0,0,.5))">
      <span>© <span class="gold">NJ HITZ</span> Softball • New Jersey</span>
    </div>
    <div class="social">
      <a href="https://www.facebook.com/nj.hitz" target="_blank" aria-label="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.1 0-121.07 44.38-121.07 124.72v70.62H22.89V288h81.4v224h100.17V288z"/></svg>
      </a>
      <a href="https://www.instagram.com/njhitz_softball/" target="_blank" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224,202.66A53.34,53.34,0,1,0,277.34,256,53.38,53.38,0,0,0,224,202.66ZM398.8,80A47.7,47.7,0,0,0,351.1,32H96.9A47.7,47.7,0,0,0,49.2,80V432a47.7,47.7,0,0,0,47.7,48H351.1a47.7,47.7,0,0,0,47.7-48ZM224,338a82,82,0,1,1,82-82A82.09,82.09,0,0,1,224,338Zm104-146a19,19,0,1,1,19-19A19,19,0,0,1,328,192Z"/></svg>
      </a>
    </div>
  </div>
  -->
<script>
(function(){
  // --- 1) SET THESE TO YOUR GOOGLE FORM DETAILS ---
  // Open your live Google Form, copy its "action" URL (ends with /formResponse)
  const GOOGLE_FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSdFQbPCuqXE3CL1Bqqg3CvsjZh8_FfPWgzC1pQlrxwvE5nztw/formResponse";

  // Map your local fields -> Google Form entry IDs (find them in the form HTML)
  const MAP = {
    name:       "entry.1398959969", // <-- fixed (had been 139895996)
    address:    "entry.1424698732",
    phone:      "entry.1957154046",
    email:      "entry.1992213922",
    agegrad:    "entry.2106801821",
    highschool: "entry.1125414312",
    pos1:       "entry.1376913827",
    pos2:       "entry.754009436",
    pos3:       "entry.287020567",
    birthdateBase: "entry.1243531652" // post _year/_month/_day
  };
  // ------------------------------------------------

  const form = document.getElementById('tryoutForm');
  const success = document.getElementById('successMsg');
  const btn = document.getElementById('submitBtn');

  // Fields
  const fName = document.getElementById('playerName');
  const fAddress = document.getElementById('playerAddress');
  const fPhone = document.getElementById('guardianPhone');
  const fEmail = document.getElementById('guardianEmail');
  const fBirth = document.getElementById('birthdate');
  const fAgeGrad = document.getElementById('ageGradYear');
  const fHS = document.getElementById('highSchool');
  const fPos1 = document.getElementById('pos1');
  const fPos2 = document.getElementById('pos2');
  const fPos3 = document.getElementById('pos3');

  // Errors
  const eName = document.getElementById('errName');
  const eAddress = document.getElementById('errAddress');
  const ePhone = document.getElementById('errPhone');
  const eEmail = document.getElementById('errEmail');
  const eBirth = document.getElementById('errBirthdate');
  const eAgeGrad = document.getElementById('errAgeGrad');

  const phoneRegex = /^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\s\.-]?)?\d{3}[\s\.-]?\d{4}$/;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  function setError(input, errEl, msg){ input.setAttribute('aria-invalid','true'); errEl.textContent = msg; }
  function clearError(input, errEl){ input.removeAttribute('aria-invalid'); errEl.textContent = ''; }

  function validateField(input){
    const id = input.id;
    const val = (input.value || '').trim();

    if(id === 'playerName'){ if(!val){ setError(input,eName,'Player name is required.'); return false;} clearError(input,eName); return true; }
    if(id === 'playerAddress'){ if(!val){ setError(input,eAddress,'Address is required.'); return false;} clearError(input,eAddress); return true; }
    if(id === 'guardianPhone'){
      if(!val){ setError(input,ePhone,'Phone is required.'); return false; }
      if(!phoneRegex.test(val)){ setError(input,ePhone,'Enter a valid phone number.'); return false; }
      clearError(input,ePhone); return true;
    }
    if(id === 'guardianEmail'){
      if(!val){ setError(input,eEmail,'Email is required.'); return false; }
      if(!emailRegex.test(val)){ setError(input,eEmail,'Enter a valid email address.'); return false; }
      clearError(input,eEmail); return true;
    }
    if(id === 'birthdate'){ if(!val){ setError(input,eBirth,'Birthdate is required.'); return false;} clearError(input,eBirth); return true; }
    if(id === 'ageGradYear'){ if(!val){ setError(input,eAgeGrad,'Grad Year is required.'); return false;} clearError(input,eAgeGrad); return true; }
    return true;
  }

  function validateAll(){
    const results = [
      validateField(fName),
      validateField(fAddress),
      validateField(fPhone),
      validateField(fEmail),
      validateField(fBirth),
      validateField(fAgeGrad)
    ];
    const firstInvalid = [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].find(el => el.getAttribute('aria-invalid') === 'true');
    if(firstInvalid) firstInvalid.focus();
    return results.every(Boolean);
  }

  [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].forEach(el=>{
    el.addEventListener('input', ()=>validateField(el));
    el.addEventListener('blur', ()=>validateField(el));
  });

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    success.style.display = 'none';
    if(!validateAll()) return;

    // Build payload for Google Forms
    const payload = new FormData();
    payload.append(MAP.name,      fName.value.trim());
    payload.append(MAP.address,   fAddress.value.trim());
    payload.append(MAP.phone,     fPhone.value.trim());
    payload.append(MAP.email,     fEmail.value.trim());
    payload.append(MAP.agegrad,   fAgeGrad.value.trim());

    if(MAP.highschool) payload.append(MAP.highschool, (fHS.value || '').trim());
    if(MAP.pos1) payload.append(MAP.pos1, (fPos1.value || '').trim());
    if(MAP.pos2) payload.append(MAP.pos2, (fPos2.value || '').trim());
    if(MAP.pos3) payload.append(MAP.pos3, (fPos3.value || '').trim());

    // --- Birthdate: split YYYY-MM-DD into Google Forms' 3 fields ---
    const iso = (fBirth.value || '').trim();       // e.g., "2025-10-23"
    const [yyyy, mm, dd] = iso ? iso.split('-') : [null, null, null];
    if (yyyy && mm && dd) {
      // Google Forms expects the same base id with _year, _month, _day suffixes
      payload.append(`${MAP.birthdateBase}_year`,  String(parseInt(yyyy, 10)));
      payload.append(`${MAP.birthdateBase}_month`, String(parseInt(mm,   10))); // 1-12
      payload.append(`${MAP.birthdateBase}_day`,   String(parseInt(dd,   10))); // 1-31
    } else {
      // (Optional) You can block submission here if birthdate is required
      // but your validation already enforces it before submit.
    }

    // Optional Google Forms extras (not always required, safe to include)
    payload.append('fvv','1'); payload.append('pageHistory','0');

    btn.disabled = true; btn.textContent = 'Submitting…';
    try{
      // Note: Google Forms doesn't send CORS responses → use no-cors
      await fetch(GOOGLE_FORM_ACTION, { method:'POST', mode:'no-cors', body: payload });
      form.reset();
      [fName,fAddress,fPhone,fEmail,fBirth,fAgeGrad].forEach(el=>el.removeAttribute('aria-invalid'));
      success.style.display = 'block';
    }catch(err){
      alert('There was an error submitting the form. Please try again.');
    }finally{
      btn.disabled = false; btn.textContent = 'Submit Registration';
    }
  });
})();
</script>

<script src="scripts/template-loader.js"></script>
</body>
</html>