<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NJ HITZ Softball</title>
  <meta name="description" content="NJ Hitz is a competitive softball program in New Jersey, focused on player development, high-level competition, and a true team-first culture.">
  <meta name="image" content="https://njhitz.org/images/hitz-meta-og.png">

  <!-- Open Graph / Facebook / LinkedIn -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://njhitz.org/">
  <meta property="og:title" content="NJ Hitz Softball">
  <meta property="og:description" content="NJ Hitz is a competitive softball program in New Jersey, focused on player development, high-level competition, and a true team-first culture.">
  <meta property="og:image" content="https://njhitz.org/images/hitz-meta-og.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="NJ Hitz">

  <!-- Optional: extra image reference (square) for Google -->
  <meta itemprop="image" content="https://njhitz.org/images/hitz-meta-square.png">

  <!-- Twitter (X) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://njhitz.org/">
  <meta name="twitter:title" content="NJ Hitz Softball">
  <meta name="twitter:description" content="NJ Hitz is a competitive softball program in New Jersey, focused on player development, high-level competition, and a true team-first culture.">
  <meta name="twitter:image" content="https://njhitz.org/images/hitz-meta-twitter.png">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "NJ Hitz Softball",
    "url": "https://njhitz.org/",
    "logo": "https://njhitz.org/images/hitz-meta-square.png",
    "image": [
      "https://njhitz.org/images/hitz-meta-og.png",
      "https://njhitz.org/images/hitz-meta-square.png"
    ]
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <script src="scripts/preload.js"></script>
  <!--- <script src="https://www.google.com/recaptcha/api.js?render=YOUR_RECAPTCHA_SITE_KEY"></script> --->
  
  <link href="css/main.css" rel="stylesheet">
  <style>
    /* HERO */
    .hero{position:relative;height:clamp(360px,55vw,560px);overflow:hidden;border-bottom:4px solid var(--hitz-gold);background:#0f0f11}
    .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,.65) 30%,rgba(0,0,0,.75))}
    .slides{position:absolute;inset:0}
    .slides img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity 900ms ease}
    .slides img.active{opacity:1}
    .hero-content{position:relative;z-index:2;height:100%;display:grid;place-items:center;text-align:center;padding:16px}
    .brand img{height: 150px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.5))}
    @media(max-width:428px){ .brand img{ height:100px; } }
    .hero h1{margin:14px 0 8px;font-size:clamp(28px,4.2vw,56px);line-height:1.02;font-weight:900}
    .hero p{margin:18px auto;max-width:800px;color:#eaeaf0;font-size:clamp(16px,1.6vw,18px)}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .btn{appearance:none;border:2px solid var(--hitz-gold);color:var(--hitz-white);background:transparent;padding:10px 16px;border-radius:999px;font-weight:800;letter-spacing:.04em;text-decoration:none;transition:transform .15s ease,background .2s ease}
    .btn:hover{background:var(--hitz-gold);color:var(--hitz-black);transform:translateY(-1px)}
    .btn.solid{background:var(--hitz-purple);border-color:var(--hitz-purple)}
    .btn.solid:hover{background:#3e2170;color:var(--hitz-white)}

    /* Sections */
    .section{padding:clamp(42px,6vw,80px) 0;background:#121214;border-top:1px solid rgba(255,255,255,.06)}
    .section.alt{background:radial-gradient(1200px 800px at 70% -10%,rgba(179,139,53,.15),transparent 60%),#0f0f11}
    .section h2{font-size:clamp(24px,3vw,38px);margin:0 0 14px;letter-spacing:.02em}
    .eyebrow{color:var(--hitz-gold);text-transform:uppercase;font-weight:900;letter-spacing:.11em;font-size:.8rem;margin-bottom:8px;display:inline-block}
    .lead{color:#d7d7de;max-width:860px}

    /* Cards */
    .card-grid{margin-top:26px;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,#18181b,#141418);border:1px solid rgba(255,255,255,.06);border-radius:16px;overflow:hidden;min-height:220px;display:grid;grid-template-rows:160px auto}
    .card img{width:100%;height:100%;object-fit:cover;object-position: top;}
    .card .body{padding:14px}
    .card .body h3{margin:0 0 6px;font-size:1.05rem}
    .card .body p{margin:0;color:#cfcfdb;font-size:.95rem}

    /* Coach bios */
    .coach-grid{margin-top:26px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}
    .coach{background:#16161a;border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:16px;display:grid;grid-template-columns:84px 1fr;gap:14px;align-items:center}
    .coach .avatar{width:84px;height:84px;border-radius:10px;overflow:hidden;border:2px solid var(--hitz-gold);background:#0e0e10}
    .coach .avatar img{width:100%;height:100%;object-fit:cover}
    .coach h4{margin:0;font-size:1.05rem}
    .coach small{color:#c9c9d6}

    /* Gallery grid */
    .gallery{margin-top:22px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
    .gallery a{position:relative;display:block;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.07)}
    .gallery img{width:100%;height:200px;object-fit:cover;transition:transform .25s ease}
    .gallery a:hover img{transform:scale(1.04)}

    /* Lightbox / Modal */
    .lightbox{
      position:fixed; inset:0; display:none;
      background:rgba(0,0,0,.85);
      z-index:9999;
      align-items:center; justify-content:center;
      padding: clamp(10px, 4vw, 24px);
    }
    .lightbox.open{ display:flex; }
    .lightbox-content{
      position:relative; max-width: min(96vw, 1200px); max-height: 90vh;
      display:flex; align-items:center; gap:10px;
    }
    .lightbox-img{
      max-width: 86vw; max-height: 80vh;
      border-radius: 10px; border: 2px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 30px rgba(0,0,0,.6);
      background:#000;
      transition: opacity .2s ease;
    }
    .lightbox-close, .lightbox-prev, .lightbox-next{
      position:absolute; top:50%; transform:translateY(-50%);
      background: rgba(20,20,24,.7);
      color: var(--hitz-white);
      border: 2px solid var(--hitz-gold);
      width: 42px; height: 42px; border-radius: 999px;
      display:grid; place-items:center; cursor:pointer;
      user-select:none; -webkit-user-select:none;
      font-weight:900; font-size: 18px;
      padding:initial;
    }
    .lightbox-close{
      top: -14px; right: -14px; transform:none;
      width: 38px; height: 38px; font-size: 16px;
      background: linear-gradient(180deg,#1a1a1d,#121214);
      display:none;
    }
    .lightbox-prev{ left: -56px; }
    .lightbox-next{ right: -56px; }
    .lightbox-prev:active, .lightbox-next:active, .lightbox-close:active { transform: translateY(-50%) scale(.98); }
    .lightbox-close:active{ transform: scale(.98); }

    .lightbox-caption{
      text-align:center; color:#e6e6ea; margin-top:10px; max-width: min(92vw, 1000px);
      font-size:.95rem;
    }

    /* Lightbox loading overlay */
    .lightbox-loading{
      position:absolute;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      z-index:3;
    }
    .lightbox-loading.visible{
      display:flex;
    }
    .lightbox-spinner{
      width:32px;
      height:32px;
      border-radius:50%;
      border:3px solid rgba(255,255,255,.4);
      border-top-color:var(--hitz-gold);
      animation:gallery-spin .7s linear infinite;
    }

    @media (max-width: 768px){
      .lightbox-content{ max-width:100%; }
      .lightbox-prev{ left: 8px; }
      .lightbox-next{ right: 8px; }
      .lightbox-close{ right: 8px; top: 8px; }
    }

    

    /* Modal (Formspree) */
    .modal{position:fixed;inset:0;display:none;z-index:10000}
    .modal.open{display:block}
    .modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.78)}
    .modal__dialog{
      position:relative; z-index:1; width:min(560px,92vw); margin:8vh auto;
      background:#121214; border:1px solid rgba(255,255,255,.08); border-radius:16px;
      padding:22px 20px 18px; box-shadow:0 20px 50px rgba(0,0,0,.6)
    }
    .modal__close{
      position:absolute; top:10px; right:10px; width:36px; height:36px; border-radius:999px; padding:0;
      border:2px solid var(--hitz-gold); background:rgba(20,20,24,.7); color:#fff; cursor:pointer; font-weight:900
    }
    .modal__subtitle{color:#cfcfdb;margin:-2px 0 14px}
    .modal label{display:block;margin:10px 0 6px;font-weight:700;color:var(--hitz-gold)}
    .modal input, .modal textarea{
      width:100%; padding:10px 12px; border-radius:8px; border:1px solid #333; background:#1a1a1f; color:#fff;
    }
    .modal input:focus, .modal textarea:focus{outline:none;border-color:var(--hitz-gold)}
    .modal__actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
    .modal .btn{border:2px solid var(--hitz-gold)}
    .hp{position:absolute !important; left:-9999px !important; opacity:0 !important; pointer-events:none}
    .form-success{color:#71ffb0; font-weight:700; margin-top:10px}
    .form-error{color:#ff9c9c; font-weight:700; margin-top:10px}
    @media (max-width:600px){ .modal__dialog{margin:6vh auto;padding:18px 16px} }

    /* Field-level errors & invalid state */
    .field-error {
      color: #ff9c9c;
      font-size: 0.9rem;
      margin: -12px 0 12px 0;
      min-height: 1em; /* reserve space to avoid layout shift */
    }
    .modal input[aria-invalid="true"],
    .modal textarea[aria-invalid="true"] {
      border-color: #ff6b6b !important;
      box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.15);
    }
    /* existing modal styles assumed present:
      .modal, .modal.open, .modal__backdrop, .modal__dialog, .modal__close, .modal__actions, .hp, .form-success, .form-error */

    /* Field layout */
    .modal .form-field {
      display: block;
      /*margin-bottom: 16px;*/        /* space between fields */
    }

    /* Tighten input spacing; the error gets its own block below */
    .modal .form-field input,
    .modal .form-field textarea {
      margin-bottom: 6px;         /* small gap before error text */
    }

    /* Reset and align error blocks cleanly under inputs */
    .field-error {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #ff9c9c;
      font-size: 0.92rem;
      line-height: 1.3;
      margin: 0;                  /* remove negative margins */
      min-height: 1.1em;          /* reserve space to avoid layout shift */
    }

    /* Optional: a subtle error dot */
    /*.field-error::before {
      content: "‚óè";
      font-size: 0.8em;
    }*/

    /* Invalid field visuals */
    .modal input[aria-invalid="true"],
    .modal textarea[aria-invalid="true"] {
      border-color: #ff6b6b !important;
      box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.15);
    }

    /* Ensure labels are consistent */
    .modal label {
      margin: 10px 0 6px;
      display: block;
    }

    /* Gallery slider */
    .gallery-slider{
      position:relative;
      margin-top:22px;
      overflow:hidden;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.08);
      background:#050507;
      touch-action: pan-y;
      -webkit-overflow-scrolling: touch;
      opacity:0;
      pointer-events:none;
      transition:opacity .35s ease;
    }
    .gallery-slider.ready{
      opacity:1;
      pointer-events:auto;
    }

    .gallery-track{
      display:flex;
      transition:transform .6s ease;
      will-change:transform;
    }
    .gallery-slide{
      min-width:100%;
      height: clamp(220px, 40vw, 420px);
    }
    .gallery-slide img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      cursor:pointer;
      user-select:none;
      -webkit-user-drag:none;
    }

    .gallery-nav{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:40px;
      height:40px;
      border-radius:999px;
      border:2px solid rgba(255,255,255,.6);
      background:rgba(0,0,0,.55);
      color:#fff;
      display:grid;
      place-items:center;
      cursor:pointer;
      font-size:22px;
      font-weight:900;
      z-index:2;
      padding:initial;
    }
    .gallery-prev{ left:12px; }
    .gallery-next{ right:12px; }

    .gallery-dots{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:10px;
      display:flex;
      gap:6px;
      z-index:2;
    }
    .gallery-dot{
      width:10px;
      height:10px;
      border-radius:999px;
      border:none;
      background:rgba(255,255,255,.35);
      cursor:pointer;
      padding:0;
    }
    .gallery-dot.active{
      background:var(--hitz-gold);
      width:18px;
    }

    #galleryLoading,
    #galleryError{
      margin-top:10px;
      font-size:.95rem;
      margin:auto;
      justify-content: center;
    }
    #galleryLoading{
      color:#cfcfdb;
      display:flex;
      align-items:center;
      gap:8px;
    }
    #galleryError{
      color:#ff9c9c;
    }

    .gallery-spinner{
      width:18px;
      height:18px;
      border-radius:50%;
      border:2px solid rgba(255,255,255,.4);
      border-top-color:var(--hitz-gold);
      animation:gallery-spin .7s linear infinite;
    }

    @keyframes gallery-spin{
      to{ transform:rotate(360deg); }
    }

    @media (max-width:600px){
      .gallery-nav{
        width:32px;
        height:32px;
        font-size:18px;
      }
      .gallery-slide{
        height: clamp(220px, 65vw, 360px);
      }
      .gallery-prev,.gallery-next {
        display:none;
      }
    }
  </style>  
</head>
<body>
  <!-- Shared site header -->
  <header class="site-header" id="header"></header>

  <section id="nj-hitz">
    <!-- HERO -->
    <div class="hero">
      <div class="slides" aria-hidden="true">
        <img src="images/gallery/7F0A3530.webp" alt="HITZ player making contact at the plate" class="active">
        <img src="images/gallery/7F0A3436.webp" alt="HITZ pitcher delivering a pitch">
        <img src="images/gallery/IMG_7017_Original.webp" alt="Infield ready and pitch in motion">
        <img src="images/gallery/IMG_7155_Original.webp" alt="Team photo with tournament medals">
      </div>
      <div class="hero-content container">
        <div>
          <div class="brand">
            <img src="images/hitzpurple.webp" alt="NJ HITZ logo">
          </div>
          <h1>Fastpitch Culture. Competitive Edge.</h1>
          <p>NJ HITZ is a New Jersey club softball program focused on player development, college-ready fundamentals, and a positive, high-energy culture on and off the field.</p>
          <div class="cta-row" style="display:none;">
            <a class="btn solid" href="#program">Explore Programs</a>
            <a class="btn" href="#mission">Our Mission</a>
            <a class="btn" href="#gallery">Photo Gallery</a>
            <a class="btn" href="#contact">Contact Us</a>
          </div>
        </div>
      </div>
    </div>

    <!-- PROGRAM HIGHLIGHTS -->
    <div class="section alt" id="program">
      <div class="container">
        <span class="eyebrow">Program Highlights</span>
        <h2>Development First. Results Follow.</h2>
        <p class="lead">From 12U to 18U, NJ HITZ emphasizes advanced fundamentals, IQ, and team culture.</p>
        <div class="card-grid">
          <article class="card">
            <img src="images/gallery/7F0A3436-zoom.webp" alt="Pitcher in stride">
            <div class="body">
              <h3 class="gold">Elite Pitching & Defense</h3>
              <p>Infield/outfield systems, pitcher-catcher battery work, and situational reps driven by data and deliberate practice.</p>
            </div>
          </article>
          <article class="card">
            <img src="images/gallery/IMG_6762_Original.webp" alt="Hitter rounding the bases">
            <div class="body">
              <h3 class="gold">Offense & Speed</h3>
              <p>Contact approach, power development, and baserunning pressure ‚Äî small-ball to gap-to-gap power.</p>
            </div>
          </article>
          <article class="card">
            <img src="images/gallery/7F0A3438.webp" alt="Infielders diving play">
            <div class="body">
              <h3 class="gold">Culture & Mentorship</h3>
              <p>Character, confidence, and leadership with veteran staff and alumni engagement.</p>
            </div>
          </article>
        </div>
      </div>
    </div>

    <!-- MISSION -->
    <div class="section" id="mission">
      <div class="container">
        <span class="eyebrow">Our Mission</span>
        <h2>Build Great Players ‚Äî And Even Better People</h2>
        <p class="lead">The NJ Hitz Organization, based out of Mount Olive, New Jersey, is dedicated to providing young ladies across northern New Jersey 
          with a competitive fast-pitch softball program that fosters teamwork, skill development, and personal growth. Our program combines a national-level 
          club look and feel with budget-friendly expenses, ensuring every athlete can experience high-quality training, competition, and development 
          opportunities without the overwhelming financial burden.</p>
      </div>
    </div>

    <!-- COACH BIOS -->
    <div class="section alt" id="coaches">
      <div class="container">
        <span class="eyebrow">Staff</span>
        <h2>Coaching Team</h2>
        <p class="lead">Swap the placeholder headshots, titles, and short bios below. Link to email or social profiles if desired.</p>
        <div class="coach-grid">
          <div class="coach">
            <div class="avatar"><img src="images/coaches/e7a5f8_51fb68567862449fa6f065cb6231fa59~mv2.avif" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Carlos Duran <span class="gold">‚Äî Sr. Advisor</span></h4>
              <small></small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/J-Babai.jpg" alt="Coach headshot placeholder"></div>
            <div>
              <h4>John Babai <span class="gold">‚Äî General Manager</span></h4>
              <small></small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/e7a5f8_ce0583e32c784fe087137faf14ae8901~mv2.avif" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Micahel Borozan<span class="gold">‚Äî 18U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/e7a5f8_0c87f41d1ac9434fb973d9a85f45f1af~mv2.avif" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Mike Caputo <span class="gold">‚Äî 18U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/e7a5f8_6c3f6a675a4d420c81d3780aa45e7cfb~mv2.avif" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Brittany Demarest <span class="gold">‚Äî 18U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/e7a5f8_1d529215bfe84f258d9fbe80bef43d3e~mv2.avif" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Amanda Dizinno <span class="gold">‚Äî 18U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/coaches/morgan-demm.jpg" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Morgan Demm <span class="gold">‚Äî 14U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
          <div class="coach">
            <div class="avatar"><img src="images/IMG_9316.PNG" alt="Coach headshot placeholder"></div>
            <div>
              <h4>Coach Name <span class="gold">‚Äî 12U</span></h4>
              <small>Bio ‚Ä¢ Core Focus ‚Ä¢ Skillset</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- GALLERY -->
    <div class="section" id="gallery">
      <div class="container">
        <span class="eyebrow">Photos</span>
        <h2>Action from the Diamond</h2>
        <p class="lead">Tap any image to view in a full-screen gallery. Swipe on mobile or use your arrow keys.</p>

        <p id="galleryLoading">
          <span class="gallery-spinner" aria-hidden="true"></span>
          <span>Loading photos‚Ä¶</span>
        </p>
        <div class="gallery-slider" id="gallerySlider" aria-label="Team photo gallery">
          <div class="gallery-track" id="galleryTrack">
            <!-- Slides injected via JS -->
          </div>
          <button class="gallery-nav gallery-prev" type="button" aria-label="Previous photo">‚Äπ</button>
          <button class="gallery-nav gallery-next" type="button" aria-label="Next photo">‚Ä∫</button>
          <div class="gallery-dots" id="galleryDots" aria-hidden="true"></div>
        </div>
        <p id="galleryError" hidden>Unable to load gallery right now.</p>
      </div>
    </div>


    <!-- CONTACT -->
    <div class="section alt" id="contact">
      <div class="container">
        <span class="eyebrow">Join NJ HITZ</span>
        <h2>Ready to Compete?</h2>
        <div class="cta-row">
          <!--- <button class="btn solid" type="button" id="openEmailModal">Email Us</button> --->
          <a class="btn solid" type="button" id="openEmailModal" style="cursor:pointer;">Email Us</a>
          <a class="btn solid" href="tryouts" target="_self" rel="noopener">Tryout Interest Form</a>
        </div>
      </div>
    </div>

    <div id="footer"></div>
  </section>

  <!-- EMAIL MODAL -->
  <div class="modal" id="emailModal" aria-hidden="true" role="dialog" aria-labelledby="emailModalTitle">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__dialog" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>‚úï</button>
      <h3 id="emailModalTitle">Contact NJ HITZ</h3>
      <p class="modal__subtitle">Send us a message and we‚Äôll get back to you.</p>

      <form id="emailForm" action="https://formspree.io/f/xrbywlgw" method="POST" novalidate>
        <input type="hidden" name="_subject" value="NJ HITZ Website ‚Äî Contact Form" />
        <input type="hidden" name="g-recaptcha-response" id="recaptchaToken" />
        <input type="text" name="_gotcha" class="hp" tabindex="-1" autocomplete="off" aria-hidden="true" />

        <div class="form-field">
          <label for="cfName">Your Name</label>
          <input id="cfName" name="name" type="text" required placeholder="Jane Doe" />
          <div class="field-error" id="errName" aria-live="polite"></div>
        </div>

        <div class="form-field">
          <label for="cfEmail">Your Email</label>
          <input id="cfEmail" name="email" type="email" required placeholder="jane@example.com" />
          <div class="field-error" id="errEmail" aria-live="polite"></div>
        </div>

        <div class="form-field">
          <label for="cfPhone">Phone Number</label>
          <input id="cfPhone" name="phone" type="tel" required placeholder="(555) 123-4567"
                pattern="^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\\s.-]?)?\\d{3}[\\s.-]?\\d{4}$"
                title="Enter a valid 10-digit phone number" />
          <div class="field-error" id="errPhone" aria-live="polite"></div>
        </div>

        <div class="form-field">
          <label for="cfMessage">Message</label>
          <textarea id="cfMessage" name="message" rows="4" required placeholder="How can we help?"></textarea>
          <div class="field-error" id="errMessage" aria-live="polite"></div>
        </div>

        <div class="modal__actions">
          <button class="btn solid" type="submit" id="sendBtn">Send</button>
          <button class="btn" type="button" data-close>Cancel</button>
        </div>

        <p class="form-success" id="emailSuccess" hidden>‚úÖ Thanks! Your message has been sent.</p>
        <p class="form-error" id="emailError" hidden>‚ö†Ô∏è Sorry ‚Äî please check your details and try again.</p>
      </form>
    </div>
  </div>

  <!-- Simple hero slider -->
  <script>
    (function(){
      const imgs=[...document.querySelectorAll('.slides img')]; let i=0;
      setInterval(()=>{ imgs[i].classList.remove('active'); i=(i+1)%imgs.length; imgs[i].classList.add('active'); },5000);
    })();
  </script>

  <!-- LIGHTBOX / GALLERY MODAL -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Photo viewer">
    <div class="lightbox-content">
      <button class="lightbox-prev" aria-label="Previous image" type="button">‚Äπ</button>
      <!-- Centered loading indicator while full-res image loads -->
      <div class="lightbox-loading" id="lightboxLoading" aria-hidden="true">
        <div class="lightbox-spinner"></div>
      </div>
      <img class="lightbox-img" id="lightboxImg" alt="">
      <button class="lightbox-next" aria-label="Next image" type="button">‚Ä∫</button>
      <button class="lightbox-close" aria-label="Close gallery" type="button">‚úï</button>
    </div>
  </div>

  <!-- GALLERY SLIDER + LIGHTBOX LOGIC -->
  <script>
    (function(){
      /**
       * CONFIG
       *
       * GALLERY_JSON_URL:
       *  Static JSON file (e.g., from GitHub Pages or raw.githubusercontent.com) that
       *  contains the gallery index. It should have the same structure as the old
       *  doGet() response:
       *
       *  {
       *    "items": [
       *      {
       *        "id": "some-id",
       *        "src": "https://yourcdn/images/foo_web1920.jpg",     // slider image
       *        "srcLarge": "https://yourcdn/images/foo_original.jpg", // optional full image
       *        "alt": "Caption text",
       *        "createdAt": "2025-11-10T12:44:24.000Z"
       *      },
       *      ...
       *    ]
       *  }
       *
       *  or just an array of items: [ {src:..., ...}, ... ]
       */
      const GALLERY_JSON_URL = 'https://njhitz.org/data/gallery.json';
      const SLIDER_INTERVAL_MS = 6000; // üîÅ configurable autoplay interval

      const sliderEl   = document.getElementById('gallerySlider');
      const trackEl    = document.getElementById('galleryTrack');
      const dotsEl     = document.getElementById('galleryDots');
      const loadingEl  = document.getElementById('galleryLoading');
      const errorEl    = document.getElementById('galleryError');
      const prevBtn    = sliderEl.querySelector('.gallery-prev');
      const nextBtn    = sliderEl.querySelector('.gallery-next');

      // Lightbox elements
      const lightbox   = document.getElementById('lightbox');
      const lbImg      = document.getElementById('lightboxImg');
      const lbPrev     = lightbox.querySelector('.lightbox-prev');
      const lbNext     = lightbox.querySelector('.lightbox-next');
      const lbClose    = lightbox.querySelector('.lightbox-close');
      const lbLoading  = document.getElementById('lightboxLoading');

      // State
      let items        = [];    // [{src, srcLarge?, alt?, createdAt?}, ...]
      let currentIndex = 0;
      let timer        = null;
      let sliderPaused = false;
      const MIN_IMAGES_READY = 2;
      let imagesReadyCount   = 0;
      let requiredImagesReady = 0;
      let sliderIsReady      = false;

      /* ---------- Slider rendering & navigation ---------- */
      function markImageReady(index){
        const item = items[index];
        if (!item) return;
        if (item._readyCounted) return;
        item._readyCounted = true;
        imagesReadyCount++;

        if (!sliderIsReady && requiredImagesReady > 0 && imagesReadyCount >= requiredImagesReady){
          sliderIsReady = true;
          if (loadingEl) loadingEl.style.display = 'none';
          sliderEl.classList.add('ready');
          startTimer();
        }
      }

      function renderSlider(){
        trackEl.innerHTML = '';
        dotsEl.innerHTML = '';

        items.forEach((item, idx) => {
          const slide = document.createElement('div');
          slide.className = 'gallery-slide';

          const img = document.createElement('img');
          img.alt = item.alt || '';
          img.loading = 'lazy';

          // attach load/error to mark readiness
          img.addEventListener('load', () => markImageReady(idx), { once: true });
          img.addEventListener('error', () => {
            console.error('Slider image failed to load', item.src);
            markImageReady(idx); // still count so slider can appear
          });

          img.src = item.src /* Google File Location */; // direct image URL from gallery.json

          img.addEventListener('click', () => openLightbox(idx));
          slide.appendChild(img);
          trackEl.appendChild(slide);

          const dot = document.createElement('button');
          dot.type = 'button';
          dot.className = 'gallery-dot';
          dot.setAttribute('aria-label', `Go to photo ${idx + 1}`);
          dot.addEventListener('click', () => {
            goTo(idx);
            resetTimer();
          });
          dotsEl.appendChild(dot);
        });

        if (items.length){
          goTo(0, false);
        }
      }

      function goTo(index, animate = true){
        if (!items.length) return;
        currentIndex = (index + items.length) % items.length;

        const offset = -currentIndex * 100;
        if (!animate){
          trackEl.style.transition = 'none';
          trackEl.style.transform = `translateX(${offset}%)`;
          void trackEl.offsetWidth;
          trackEl.style.transition = '';
        } else {
          trackEl.style.transform = `translateX(${offset}%)`;
        }

        Array.from(trackEl.children).forEach((slide, i) => {
          slide.classList.toggle('active', i === currentIndex);
        });
        Array.from(dotsEl.children).forEach((dot, i) => {
          dot.classList.toggle('active', i === currentIndex);
        });
      }

      function next(){ goTo(currentIndex + 1); }
      function prev(){ goTo(currentIndex - 1); }

      function startTimer(){
        if (timer || sliderPaused || !items.length) return;
        timer = setInterval(next, SLIDER_INTERVAL_MS);
      }
      function stopTimer(){
        if (timer){
          clearInterval(timer);
          timer = null;
        }
      }
      function resetTimer(){
        stopTimer();
        startTimer();
      }

      function pauseSlider(){
        sliderPaused = true;
        stopTimer();
      }
      function resumeSlider(){
        sliderPaused = false;
        startTimer();
      }

      prevBtn.addEventListener('click', () => { prev(); resetTimer(); });
      nextBtn.addEventListener('click', () => { next(); resetTimer(); });

      // Touch swipe support for mobile slider
      let sliderTouchStartX = 0;
      let sliderTouchStartY = 0;
      let sliderTouchActive = false;

      sliderEl.addEventListener('touchstart', (e) => {
        if (!sliderIsReady || !items.length) return;
        const t = e.changedTouches[0];
        sliderTouchStartX = t.clientX;
        sliderTouchStartY = t.clientY;
        sliderTouchActive = true;
      }, { passive: true });

      sliderEl.addEventListener('touchend', (e) => {
        if (!sliderTouchActive) return;
        sliderTouchActive = false;
        const t = e.changedTouches[0];
        const dx = t.clientX - sliderTouchStartX;
        const dy = t.clientY - sliderTouchStartY;

        if (Math.abs(dy) > Math.abs(dx)) return;
        if (Math.abs(dx) < 40) return;

        if (dx < 0) {
          next();
        } else {
          prev();
        }
        resetTimer();
      }, { passive: true });

      /* ---------- Lightbox (modal) ---------- */

      function showLightboxLoading(){
        if (!lbLoading) return;
        lbLoading.classList.add('visible');
        lbImg.style.opacity = '0';
      }
      function hideLightboxLoading(){
        if (!lbLoading) return;
        lbLoading.classList.remove('visible');
        lbImg.style.opacity = '1';
      }

      function loadImageForLightbox(index){
        const item = items[index];
        if (!item) return;

        const url = item.srcLarge || item.src;
        if (!url) return;

        lbImg.alt = item.alt || '';
        showLightboxLoading();

        lbImg.onload = () => {
          hideLightboxLoading();
        };
        lbImg.onerror = () => {
          console.error('Lightbox image failed to load', url);
          hideLightboxLoading();
        };

        lbImg.src = url;
      }

      function updateLightbox(){
        const item = items[currentIndex];
        if (!item) return;
        loadImageForLightbox(currentIndex);
      }

      function openLightbox(index){
        pauseSlider();
        currentIndex = index;
        updateLightbox();
        goTo(currentIndex);

        lightbox.classList.add('open');
        lightbox.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function closeLightbox(){
        lightbox.classList.remove('open');
        lightbox.setAttribute('aria-hidden', 'true');
        lbImg.removeAttribute('src');
        hideLightboxLoading();
        document.body.style.overflow = '';
        resumeSlider();
      }

      lbPrev.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + items.length) % items.length;
        updateLightbox();
        goTo(currentIndex);
      });
      lbNext.addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % items.length;
        updateLightbox();
        goTo(currentIndex);
      });
      lbClose.addEventListener('click', closeLightbox);

      lightbox.addEventListener('click', (e) => {
        if (!e.target.closest('.lightbox-content')) {
          closeLightbox();
        }
      });

      window.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('open')) return;
        if (e.key === 'Escape')      closeLightbox();
        if (e.key === 'ArrowRight'){ currentIndex = (currentIndex + 1) % items.length; updateLightbox(); goTo(currentIndex); }
        if (e.key === 'ArrowLeft') { currentIndex = (currentIndex - 1 + items.length) % items.length; updateLightbox(); goTo(currentIndex); }
      });

      let touchStartX = 0;
      lbImg.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });
      lbImg.addEventListener('touchend', (e) => {
        const dx = e.changedTouches[0].screenX - touchStartX;
        if (Math.abs(dx) > 50){
          if (dx < 0){
            currentIndex = (currentIndex + 1) % items.length;
          } else {
            currentIndex = (currentIndex - 1 + items.length) % items.length;
          }
          updateLightbox();
          goTo(currentIndex);
        }
      }, { passive: true });

      /* ---------- Load from static gallery.json (newest ‚Üí oldest) ---------- */

      const GALLERY_CACHE_KEY = 'hitzGallery:v1.4';

      async function loadGallery(){
        if (!GALLERY_JSON_URL){
          console.warn('Set GALLERY_JSON_URL to your gallery JSON file URL.');
          return;
        }

        // 1) Try sessionStorage first
        /* Gallery data loaded from json now, no need to cache
        try {
          const cached = sessionStorage.getItem(GALLERY_CACHE_KEY);
          if (cached) {
            const data = JSON.parse(cached);
            items = (Array.isArray(data) ? data : (data.items || []))
              .filter(p => p && p.src)
              .sort((a, b) => {
                const da = a.createdAt ? new Date(a.createdAt).getTime() : 0;
                const db = b.createdAt ? new Date(b.createdAt).getTime() : 0;
                return db - da; // newest ‚Üí oldest
              });

            if (items.length) {
              requiredImagesReady = Math.min(MIN_IMAGES_READY, items.length);
              renderSlider();
              return;
            }
          }
        } catch (e) {
          console.warn('Gallery cache parse error, ignoring cache', e);
        }
        */

        // 2) Fallback to network
        try {
          const resp = await fetch(GALLERY_JSON_URL, { cache: 'no-cache' });
          if (!resp.ok) throw new Error('HTTP ' + resp.status);
          const data = await resp.json();

          items = (Array.isArray(data) ? data : (data.items || []))
            .filter(p => p && p.src)
            .sort((a, b) => {
              const da = a.createdAt ? new Date(a.createdAt).getTime() : 0;
              const db = b.createdAt ? new Date(b.createdAt).getTime() : 0;
              return db - da;
            });

          if (!items.length){
            throw new Error('No images returned from gallery.json.');
          }

          try {
            sessionStorage.setItem(GALLERY_CACHE_KEY, JSON.stringify({ items }));
          } catch (e) {
            console.warn('Unable to write gallery cache', e);
          }

          requiredImagesReady = Math.min(MIN_IMAGES_READY, items.length);
          renderSlider();
        } catch (err){
          console.error('Gallery load failed', err);
          if (loadingEl) loadingEl.textContent = '';
          if (errorEl){
            errorEl.hidden = false;
            errorEl.textContent = 'Unable to load gallery right now.';
          }
        }
      }

      document.addEventListener('DOMContentLoaded', loadGallery);
    })();
  </script>

  <!-- MODAL JS -->
  <script>
    (function(){
      const openBtn = document.getElementById('openEmailModal');
      const modal = document.getElementById('emailModal');
      const dialog = modal.querySelector('.modal__dialog');
      const closeEls = modal.querySelectorAll('[data-close], .modal__backdrop');
      const form = document.getElementById('emailForm');
      const successEl = document.getElementById('emailSuccess');
      const errorEl = document.getElementById('emailError');
      const sendBtn = document.getElementById('sendBtn');
      const recaptchaTokenEl = document.getElementById('recaptchaToken');

      const fName = document.getElementById('cfName');
      const fEmail = document.getElementById('cfEmail');
      const fPhone = document.getElementById('cfPhone');
      const fMsg = document.getElementById('cfMessage');

      const eName = document.getElementById('errName');
      const eEmail = document.getElementById('errEmail');
      const ePhone = document.getElementById('errPhone');
      const eMsg = document.getElementById('errMessage');

      let lastFocus = null;

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const phoneRegex = /^(\+?\d{1,2}\s?)?(\(?\d{3}\)?[\s.-]?)?\d{3}[\s.-]?\d{4}$/;

      function openModal(){
        lastFocus = document.activeElement;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
        setTimeout(()=> fName.focus(), 50);
      }
      function closeModal(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
        if(lastFocus) lastFocus.focus();
        [eName,eEmail,ePhone,eMsg].forEach(el => el.textContent = '');
        [fName,fEmail,fPhone,fMsg].forEach(el => el.removeAttribute('aria-invalid'));
        successEl.hidden = true; errorEl.hidden = true;
      }

      if (openBtn) openBtn.addEventListener('click', openModal);
      closeEls.forEach(el => el.addEventListener('click', closeModal));
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'&&modal.classList.contains('open')) closeModal(); });
      modal.addEventListener('click', (e)=>{ if(!dialog.contains(e.target)) closeModal(); });

      [fName,fEmail,fPhone,fMsg].forEach(input => {
        input.addEventListener('input', ()=> validateField(input));
      });

      function setError(input, errorEl, message){
        input.setAttribute('aria-invalid','true');
        errorEl.textContent = message;
      }
      function clearError(input, errorEl){
        input.removeAttribute('aria-invalid');
        errorEl.textContent = '';
      }

      function validateField(input){
        const id = input.id;
        const val = input.value.trim();

        if (id === 'cfName'){
          if (!val){ setError(input, eName, 'Name is required.'); return false; }
          clearError(input, eName); return true;
        }
        if (id === 'cfEmail'){
          if (!val){ setError(input, eEmail, 'Email is required.'); return false; }
          if (!emailRegex.test(val)){ setError(input, eEmail, 'Enter a valid email address.'); return false; }
          clearError(input, eEmail); return true;
        }
        if (id === 'cfPhone'){
          if (!val){ setError(input, ePhone, 'Phone is required.'); return false; }
          if (!phoneRegex.test(val)){ setError(input, ePhone, 'Enter a valid phone number.'); return false; }
          clearError(input, ePhone); return true;
        }
        if (id === 'cfMessage'){
          if (!val){ setError(input, eMsg, 'Message is required.'); return false; }
          clearError(input, eMsg); return true;
        }
        return true;
      }

      function validateAll(){
        const results = [
          validateField(fName),
          validateField(fEmail),
          validateField(fPhone),
          validateField(fMsg)
        ];
        const firstInvalid = [fName,fEmail,fPhone,fMsg].find(el => el.getAttribute('aria-invalid') === 'true');
        if (firstInvalid) firstInvalid.focus();
        return results.every(Boolean);
      }

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        successEl.hidden = true; errorEl.hidden = true;

        const ok = validateAll();
        if (!ok) { errorEl.hidden = false; errorEl.textContent = '‚ö†Ô∏è Please fix the highlighted fields.'; return; }

        sendBtn.disabled = true; sendBtn.textContent = 'Sending‚Ä¶';

        try{
          await grecaptcha.ready();
          const token = await grecaptcha.execute('YOUR_RECAPTCHA_SITE_KEY', {action: 'contact'});
          recaptchaTokenEl.value = token;
        }catch(err){
          console.warn('reCAPTCHA error:', err);
        }

        try{
          const data = new FormData(form);
          const resp = await fetch(form.action, { method:'POST', body:data, headers:{'Accept':'application/json'} });
          if(resp.ok){
            form.reset();
            [fName,fEmail,fPhone,fMsg].forEach(el => el.removeAttribute('aria-invalid'));
            successEl.hidden = false;
            setTimeout(closeModal, 1500);
          } else {
            errorEl.hidden = false; errorEl.textContent = '‚ö†Ô∏è There was a problem sending your message. Please try again.';
          }
        }catch{
          errorEl.hidden = false; errorEl.textContent = '‚ö†Ô∏è Network error. Please try again.';
        }finally{
          sendBtn.disabled = false; sendBtn.textContent = 'Send';
        }
      });
    })();
  </script>

  <script src="scripts/template-loader.js"></script>
</body>
</html>
