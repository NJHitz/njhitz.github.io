<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Player Showcase | NJ HITZ Softball</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />

  <style>
    :root {
      --hitz-purple:#4c2a85;
      --hitz-gold:#b38b35;
      --hitz-black:#0e0e0f;
      --hitz-white:#ffffff;
      --hitz-gray:#1a1a1f;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji";
      background:var(--hitz-black);
      color:var(--hitz-white);
      line-height:1.5;
    }

    a{ color:inherit; text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .page-container{
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* Header */
    header{
      position:sticky;
      top:0;
      z-index:20;
      background:linear-gradient(90deg,rgba(12,10,24,.95),rgba(17,13,30,.98));
      border-bottom:2px solid var(--hitz-gold);
      padding:10px 14px;
    }
    .header-inner{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns:auto 1fr auto;
      gap:10px;
      align-items:center;
    }
    .header-home{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 12px;
      border-radius:999px;
      border:2px solid var(--hitz-gold);
      background:rgba(10,10,16,.7);
      color:var(--hitz-white);
      text-decoration:none;
      font-size:.9rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.06em;
      transition:.2s;
      white-space:nowrap;
    }
    .header-home:hover{
      background:var(--hitz-white);
      color:var(--hitz-black);
      transform:translateY(-1px);
      text-decoration:none;
    }
    .header-logo{
      justify-self:center;
      line-height:0;
    }
    .header-logo img{
      height:56px;
      width:auto;
      filter:drop-shadow(0 2px 10px rgba(0,0,0,.6));
    }
    .header-title{
      justify-self:end;
      text-align:right;
      font-size:.9rem;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:#e8e8f2;
      font-weight:800;
    }
    @media (min-width:640px){
      .header-logo img{ height:72px; }
      .header-title{ font-size:1.05rem; }
    }

    /* Hero / top */
    .player-hero{
      position:relative;
      padding:24px 16px 18px;
      border-bottom:2px solid rgba(255,255,255,.08);
      background:
        radial-gradient(circle at 10% 0,rgba(179,139,53,.26),transparent 55%),
        linear-gradient(130deg,#181822,#090910);
    }
    .player-hero-inner{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:18px;
      align-items:center;
    }
    @media (max-width:780px){
      .player-hero-inner{
        grid-template-columns:1fr;
      }
    }

    .player-photo-wrap{
      position:relative;
      border-radius:20px;
      overflow:hidden;
      border:2px solid var(--hitz-gold);
      box-shadow:0 18px 40px rgba(0,0,0,.65);
      background:#050507;
    }
    .player-photo-wrap img{
      width:100%;
      height:100%;
      max-height:380px;
      object-fit:cover;
      object-position:center;
      display:block;
    }
    .player-jersey-tag{
      position:absolute;
      left:14px;
      bottom:14px;
      padding:6px 12px;
      border-radius:999px;
      background:rgba(0,0,0,.76);
      border:2px solid var(--hitz-gold);
      font-weight:800;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:.8rem;
    }

    .player-overview{
      padding:4px 0;
    }
    .player-name{
      font-size:clamp(26px,3.4vw,32px);
      font-weight:900;
      letter-spacing:.04em;
      text-transform:uppercase;
      margin:0 0 6px;
    }
    .player-subtitle{
      font-size:.98rem;
      color:#d3d3e4;
      margin-bottom:8px;
    }
    .player-tags{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:12px;
    }
    .player-tag{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:#151520;
      font-size:.82rem;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .player-meta{
      font-size:.9rem;
      color:#cfcfe2;
    }

    /* Main layout */
    main{
      flex:1;
      padding:22px 16px 40px;
    }
    .content{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns:1.25fr .9fr;
      gap:20px;
      align-items:flex-start;
    }
    @media (max-width:900px){
      .content{
        grid-template-columns:1fr;
      }
    }

    .card{
      background:#14141c;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.08);
      padding:16px 14px 14px;
      box-shadow:0 12px 32px rgba(0,0,0,.55);
    }
    .card h2{
      margin:0 0 10px;
      font-size:1rem;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--hitz-gold);
    }
    .card p{
      margin:0 0 8px;
      font-size:.9rem;
      color:#d3d3e2;
    }

    .info-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:8px 18px;
      font-size:.9rem;
    }
    @media (max-width:520px){
      .info-grid{
        grid-template-columns:minmax(0,1fr);
      }
    }
    .info-label{
      font-weight:600;
      color:#f1f1fb;
    }
    .info-value{
      color:#d0d0e2;
    }

    .contact-block{
      font-size:.9rem;
      margin-top:4px;
    }
    .contact-block div{
      margin-bottom:4px;
    }
    .contact-block a{
      color:var(--hitz-gold);
      text-decoration:none;
    }
    .contact-block a:hover{
      text-decoration:underline;
    }

    .stats-table{
      width:100%;
      border-collapse:collapse;
      font-size:.88rem;
      margin-top:6px;
    }
    .stats-table th,
    .stats-table td{
      border-bottom:1px solid rgba(255,255,255,.08);
      padding:4px 6px;
      text-align:left;
    }
    .stats-table thead{
      background:#181824;
    }
    .stats-table th{
      font-size:.77rem;
      text-transform:uppercase;
      letter-spacing:.09em;
      color:#e2e2f4;
    }
    .stats-table caption{
      text-align:left;
      padding:4px 0;
      font-size:.82rem;
      color:#bdbdd3;
    }

    .measurables-list{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:6px;
    }
    .measurable-pill{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:#181824;
      font-size:.82rem;
    }

    .links-list{
      list-style:none;
      padding-left:16px;
      margin:4px 0 0;
      font-size:.9rem;
    }
    .links-list li{
      margin-bottom:4px;
    }
    .links-list a{
      color:var(--hitz-gold);
      text-decoration:none;
    }
    .links-list a:hover{
      text-decoration:underline;
    }

    .muted{
      color:#a8a8bd;
      font-size:.86rem;
    }

    .error-message{
      max-width:1100px;
      margin:32px auto;
      text-align:center;
      font-size:.95rem;
      color:#f4c0c0;
    }

    /* Footer */
    footer{
      padding:14px 16px 20px;
      border-top:2px solid rgba(255,255,255,.06);
      font-size:.82rem;
      color:#bdbdd1;
      text-align:center;
      background:#101016;
    }
  </style>
</head>

<body>
  <div class="page-container">
    <header>
      <div class="header-inner">
        <a class="header-home" href="teams.html?preview=y">
          ← Back to Teams
        </a>
        <div class="header-logo">
          <img src="images/hitzpurple.png" alt="NJ HITZ logo" />
        </div>
        <div class="header-title">
          Player Showcase
        </div>
      </div>
    </header>

    <section id="player-hero" class="player-hero" style="display:none;">
      <div class="player-hero-inner">
        <div class="player-photo-wrap">
          <img id="player-photo" src="images/IMG_9316.PNG" alt="Player photo" />
          <div class="player-jersey-tag" id="player-jersey-tag"></div>
        </div>
        <div class="player-overview">
          <h1 class="player-name" id="player-name">Player Name</h1>
          <div class="player-subtitle" id="player-subtitle"></div>
          <div class="player-tags" id="player-tags"></div>
          <div class="player-meta" id="player-meta"></div>
        </div>
      </div>
    </section>

    <main>
      <div id="player-error" class="error-message" style="display:none;"></div>

      <div id="player-content" class="content" style="display:none;">
        <!-- Left column: narrative, academics, stats -->
        <div>
          <article class="card" id="card-bio">
            <h2>Player Bio</h2>
            <p id="player-bio" class="muted">
              Bio coming soon.
            </p>
          </article>

          <article class="card" id="card-academics" style="margin-top:14px;">
            <h2>Academics & Scholastic</h2>
            <div class="info-grid" id="academics-grid">
              <!-- Filled by JS -->
            </div>
            <p id="academics-notes" class="muted" style="margin-top:8px;"></p>
          </article>

          <article class="card" id="card-stats" style="margin-top:14px;">
            <h2>Performance & Stats</h2>
            <div id="stats-container">
              <!-- Offense / Pitching tables go here -->
            </div>
            <p class="muted" id="stats-note" style="margin-top:8px;"></p>
          </article>
        </div>

        <!-- Right column: contact, family, measurables, links -->
        <div>
          <article class="card" id="card-contact">
            <h2>Recruiting Contact</h2>
            <div class="contact-block" id="contact-block"></div>
          </article>

          <article class="card" id="card-family" style="margin-top:14px;">
            <h2>Family & Background</h2>
            <p id="family-notes" class="muted"></p>
          </article>

          <article class="card" id="card-measurables" style="margin-top:14px;">
            <h2>Measurables</h2>
            <div id="measurables-list" class="measurables-list"></div>
          </article>

          <article class="card" id="card-links" style="margin-top:14px;">
            <h2>Highlights & Links</h2>
            <ul id="links-list" class="links-list"></ul>
          </article>
        </div>
      </div>
    </main>

    <footer>
      © <span id="year"></span> NJ HITZ Softball — Player Showcase
    </footer>
  </div>

  <script>
    (function(){
      document.getElementById('year').textContent = new Date().getFullYear();

      const params = new URLSearchParams(window.location.search);
      const slug = params.get('player');

      const heroSection = document.getElementById('player-hero');
      const contentSection = document.getElementById('player-content');
      const errorEl = document.getElementById('player-error');

      if(!slug){
        errorEl.textContent = 'No player specified. Please use a link from the Teams page.';
        errorEl.style.display = 'block';
        return;
      }

      function setText(id, text, fallback){
        const el = document.getElementById(id);
        if(!el) return;
        el.textContent = text || fallback || '';
      }

      function createInfoRow(label, value){
        if(!value) return null;
        const wrap = document.createElement('div');
        const lab = document.createElement('div');
        lab.className = 'info-label';
        lab.textContent = label;
        const val = document.createElement('div');
        val.className = 'info-value';
        val.textContent = value;
        wrap.appendChild(lab);
        wrap.appendChild(val);
        return wrap;
      }

      function buildStatsTable(id, title, rows, columns){
        if(!rows || !rows.length) return null;

        const container = document.createElement('div');
        const table = document.createElement('table');
        table.className = 'stats-table';
        table.id = id;

        const caption = document.createElement('caption');
        caption.textContent = title;
        table.appendChild(caption);

        const thead = document.createElement('thead');
        const trHead = document.createElement('tr');
        columns.forEach(col => {
          const th = document.createElement('th');
          th.textContent = col.label;
          trHead.appendChild(th);
        });
        thead.appendChild(trHead);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        rows.forEach(row => {
          const tr = document.createElement('tr');
          columns.forEach(col => {
            const td = document.createElement('td');
            td.textContent = row[col.key] != null ? row[col.key] : '';
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);

        container.appendChild(table);
        return container;
      }

      function loadPlayer(){
        fetch('data/players.json', {cache:'no-cache'})
          .then(resp => resp.json())
          .then(data => {
            const players = (data && data.players) ? data.players : [];
            const player = players.find(p => p.slug === slug);

            if(!player){
              throw new Error('Player not found: ' + slug);
            }

            // Hero
            const photo = document.getElementById('player-photo');
            photo.src = player.photoMain || 'images/IMG_9316.PNG';
            photo.alt = player.name || 'Player photo';

            const numberText = player.number != null ? '#' + player.number : '';
            document.getElementById('player-jersey-tag').textContent = numberText || 'NJ HITZ';

            setText('player-name', player.name || 'Player Name');
            const subtitleParts = [];
            if(player.teamName) subtitleParts.push(player.teamName);
            if(player.positionPrimary) subtitleParts.push(player.positionPrimary);
            if(player.gradYear) subtitleParts.push('Class of ' + player.gradYear);
            setText('player-subtitle', subtitleParts.join(' • '));

            // Tags (positions, bats/throws, hometown)
            const tagsEl = document.getElementById('player-tags');
            tagsEl.innerHTML = '';
            if(player.positions && player.positions.length){
              const tag = document.createElement('div');
              tag.className = 'player-tag';
              tag.textContent = 'Pos: ' + player.positions.join(', ');
              tagsEl.appendChild(tag);
            }
            if(player.batsThrows){
              const tag = document.createElement('div');
              tag.className = 'player-tag';
              tag.textContent = 'B/T: ' + player.batsThrows;
              tagsEl.appendChild(tag);
            }
            if(player.cityState){
              const tag = document.createElement('div');
              tag.className = 'player-tag';
              tag.textContent = player.cityState;
              tagsEl.appendChild(tag);
            }

            const metaBits = [];
            if(player.height) metaBits.push('Ht: ' + player.height);
            if(player.weight) metaBits.push('Wt: ' + player.weight);
            if(player.hand){
              metaBits.push('Hand: ' + player.hand);
            }
            setText('player-meta', metaBits.join(' • '));

            // Bio
            setText('player-bio', player.bio || 'Player bio coming soon.');

            // Academics
            const acadGrid = document.getElementById('academics-grid');
            acadGrid.innerHTML = '';
            const rows = [
              ['School', player.schoolName],
              ['GPA', player.gpa],
              ['Honors / Programs', player.honors],
              ['Intended Major', player.intendedMajor]
            ];
            rows.forEach(([label,value]) => {
              const rowEl = createInfoRow(label, value);
              if(rowEl) acadGrid.appendChild(rowEl);
            });
            setText('academics-notes', player.academics || '');

            // Contact
            const contactBlock = document.getElementById('contact-block');
            contactBlock.innerHTML = '';
            if(player.contactEmail){
              const div = document.createElement('div');
              div.innerHTML = 'Email: <a href="mailto:' + player.contactEmail + '">' + player.contactEmail + '</a>';
              contactBlock.appendChild(div);
            }
            if(player.contactPhone){
              const div = document.createElement('div');
              div.innerHTML = 'Phone: <a href="tel:' + player.contactPhone + '">' + player.contactPhone + '</a>';
              contactBlock.appendChild(div);
            }
            if(player.guardian1Name || player.guardian1Phone || player.guardian1Email){
              const div = document.createElement('div');
              let txt = 'Parent/Guardian: ' + (player.guardian1Name || '');
              if(player.guardian1Phone) txt += ' • ' + player.guardian1Phone;
              if(player.guardian1Email) txt += ' • ' + player.guardian1Email;
              div.textContent = txt;
              contactBlock.appendChild(div);
            }
            if(player.guardian2Name || player.guardian2Phone || player.guardian2Email){
              const div = document.createElement('div');
              let txt = 'Parent/Guardian: ' + (player.guardian2Name || '');
              if(player.guardian2Phone) txt += ' • ' + player.guardian2Phone;
              if(player.guardian2Email) txt += ' • ' + player.guardian2Email;
              div.textContent = txt;
              contactBlock.appendChild(div);
            }

            if(!contactBlock.innerHTML){
              const div = document.createElement('div');
              div.className = 'muted';
              div.textContent = 'Recruiting contact details coming soon.';
              contactBlock.appendChild(div);
            }

            // Family
            setText('family-notes', player.family || 'Family and background information coming soon.');

            // Measurables
            const measList = document.getElementById('measurables-list');
            measList.innerHTML = '';
            if(player.measurables && player.measurables.length){
              player.measurables.forEach(m => {
                if(!m.label || !m.value) return;
                const pill = document.createElement('div');
                pill.className = 'measurable-pill';
                pill.textContent = m.label + ': ' + m.value;
                measList.appendChild(pill);
              });
            } else {
              const pill = document.createElement('div');
              pill.className = 'measurable-pill';
              pill.textContent = 'Measurables coming soon.';
              measList.appendChild(pill);
            }

            // Links / highlights
            const linksEl = document.getElementById('links-list');
            linksEl.innerHTML = '';
            const links = [];
            if(player.highlightVideoUrl) links.push({label:'Highlight Video', url:player.highlightVideoUrl});
            if(player.recruitingProfileUrl) links.push({label:'Recruiting Profile', url:player.recruitingProfileUrl});
            if(player.additionalLinks && player.additionalLinks.length){
              links.push.apply(links, player.additionalLinks);
            }
            if(links.length){
              links.forEach(l => {
                if(!l.url) return;
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = l.url;
                a.target = '_blank';
                a.rel = 'noopener';
                a.textContent = l.label || l.url;
                li.appendChild(a);
                linksEl.appendChild(li);
              });
            } else {
              const li = document.createElement('li');
              li.className = 'muted';
              li.textContent = 'Links and highlight media coming soon.';
              linksEl.appendChild(li);
            }

            // Stats
            const statsContainer = document.getElementById('stats-container');
            statsContainer.innerHTML = '';

            const offenseTable = buildStatsTable(
              'stats-offense',
              'Offensive Stats',
              player.statsOffense || [],
              [
                {label:'Season', key:'season'},
                {label:'AVG', key:'avg'},
                {label:'OBP', key:'obp'},
                {label:'SLG', key:'slg'},
                {label:'OPS', key:'ops'},
                {label:'HR', key:'hr'},
                {label:'RBI', key:'rbi'}
              ]
            );
            if(offenseTable) statsContainer.appendChild(offenseTable);

            const pitchingTable = buildStatsTable(
              'stats-pitching',
              'Pitching Stats',
              player.statsPitching || [],
              [
                {label:'Season', key:'season'},
                {label:'ERA', key:'era'},
                {label:'IP', key:'ip'},
                {label:'K', key:'k'},
                {label:'BB', key:'bb'},
                {label:'WHIP', key:'whip'}
              ]
            );
            if(pitchingTable) statsContainer.appendChild(pitchingTable);

            if(!offenseTable && !pitchingTable){
              const p = document.createElement('p');
              p.className = 'muted';
              p.textContent = 'Statistics will be updated throughout the season.';
              statsContainer.appendChild(p);
            }

            setText('stats-note', player.statsNote || '');

            // Show sections
            heroSection.style.display = 'block';
            contentSection.style.display = 'grid';
          })
          .catch(err => {
            console.error(err);
            errorEl.textContent = 'Unable to load player profile. Please confirm the link and data file.';
            errorEl.style.display = 'block';
          });
      }

      loadPlayer();
    })();
  </script>
</body>
</html>
